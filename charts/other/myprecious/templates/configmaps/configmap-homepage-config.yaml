{{ if .Values.homepage.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: homepage-config
data:
  kubernetes.yaml: |
    mode: cluster  

  settings.yaml: |
    title: My Awesome Homepage
    background: https://images.unsplash.com/photo-1502790671504-542ad42d5189?auto=format&fit=crop&w=2560&q=80

  services.yaml: |
    - Consume Media:

        {{ if .Values.jellyfin.enabled }}
        - Jellyfin:
            icon: jellyfin.png
            href: https://{{ .Release.Name }}-jellyfin.elfhosted.com
            description: Stream Media
            widget:
              type: jellyfin
              url: http://jellyfin:8096
              key: {{`{{HOMEPAGE_VAR_JELLYFIN_KEY}}`}} 
        {{ end }} 

        {{ if or .Values.plex.enabled .Values.plexgluetun.enabled .Values.plexpia.enabled }}
        - Plex:
            icon: plex.png
            href: https://{{ .Release.Name }}-plex.elfhosted.com
            description: Stream Media
            widget:
              type: plex
              url: http://plex:32400
              key: {{`{{HOMEPAGE_VAR_PLEX_KEY}}`}} 
        {{ end }}

        {{ if .Values.emby.enabled }}
        - Emby:
            icon: emby.png
            href: https://{{ .Release.Name }}-emby.elfhosted.com
            description: Stream Media
            widget:
              type: jellyfin
              url: http://emby:8096
              key: {{`{{HOMEPAGE_VAR_EMBY_KEY}}`}} 
        {{ end }} 
        
        {{ if .Values.navidrome.enabled }}
        - Navidrome:
            icon: navidrome.png
            href: https://{{ .Release.Name }}-navidrome.elfhosted.com
            description: Stream Music
            widget:
              type: navidrome
              url: http://navidrome:4533
              user: {{`{{HOMEPAGE_VAR_NAVIDROME_USER}}`}} 
              token: {{`{{HOMEPAGE_VAR_NAVIDROME_TOKEN}}`}} 
              salt: {{`{{HOMEPAGE_VAR_NAVIDROME_SALT}}`}} 
        {{ end }}      

        {{ if .Values.calibreweb.enabled }}
        - Calibre Web:
            icon: calibreweb.png
            href: https://{{ .Release.Name }}-calibre-web.elfhosted.com
            description: Consume eBooks
            widget:
              type: calibreweb
              url: http://calibreweb:8083
              username: {{`{{HOMEPAGE_VAR_CALIBREWEB_USERNAME}}`}} 
              password: {{`{{HOMEPAGE_VAR_CALIBREWEB_PASSWORDN}}`}} 
        {{ end }}
        
        {{ if .Values.calibre.enabled }}
        - Calibre:
            icon: calibre.png
            href: https://{{ .Release.Name }}-calibre.elfhosted.com
            description: Manage eBooks
        {{ end }}             
                      
        {{ if .Values.komga.enabled }}
        - Komga:
            icon: komga.png
            href: https://{{ .Release.Name }}-komga.elfhosted.com
            description: Manage Comics
            widget:
              type: komga
              url: http://komga:25600
              username: {{`{{HOMEPAGE_VAR_KOMGA_USERNAME}}`}} 
              password: {{`{{HOMEPAGE_VAR_KOMGA_PASSWORD}}`}}            
        {{ end }}   

    - Manage Media:
        - My Second Service:
            href: http://localhost/
            description: Homepage is the best

    - Manage Downloads:
        - My Third Service:
            href: http://localhost/
            description: Homepage is ðŸ˜Ž

  widgets.yaml: |


    - greeting:
        text_size: 3xl
        text: ElfHosted 

    - resources:
        label: /storage/elfstorage
        disk: /storage/elfstorage

  {{ if .Values.storageboxa.enabled }}
    - resources:
        label: /storage/storagebox-a
        disk: /storage/storagebox-a
  {{ end }}

  {{ if .Values.storageboxb.enabled }}
    - resources:
        label: /storage/storagebox-b
        disk: /storage/storagebox-b
  {{ end }}

  {{ if .Values.storageboxc.enabled }}
    - resources:
        label: /storage/storagebox-c
        disk: /storage/storagebox-c
  {{ end }}  

  bookmarks.yaml: |
    - You:
        - Health:
            - abbr: GA
              href: "https://{{ .Release.Name }}-health.elfhosted.com"
              icon: gatus.png
        - Account:
            - abbr: GA
              href: "https://store.elfhosted.com/my-account/subscriptions/"
              icon: store.png              

    - ElfHosted:
        - Discord:
            - abbr: DI
              href: https://discord.elfhosted.com
              icon: discord.png
              description: Join our friendly Discord!
        - Docs:
            - abbr: DO
              href: https://elfhosted.com
              icon: book.png
              description: Documentation         

{{ end }}