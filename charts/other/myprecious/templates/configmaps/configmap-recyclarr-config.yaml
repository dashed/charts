{{ if .Values.recyclarr.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: recyclarr-config
data:
  recyclarr.yaml: |

    {{ if or .Values.sonarr.enabled .Values.sonarr4k.enabled }}
    sonarr:
      {{ if .Values.sonarr.enabled }}
      sonarr_hd:
        base_url: http://sonarr:8989
        api_key: {{ .Values.sonarrexposed.apikey }}
        quality_definition:
          type: series
        custom_formats:
          - trash_ids:
              - c20f169ef63c5f40c2def54abaf4438e # Web Tier 01
              - 403816d65392c79236dcb6dd591aeda4 # Web Tier 02
            strict_negative_scores: false
            tags: [tv]
      {{ end }}
      {{ if .Values.sonarr4k.enabled }}
      sonarr_4k:
        base_url: http://sonarr4k:8989
        api_key: {{ .Values.sonarr4kexposed.apikey }}
        quality_definition:
          type: series
        custom_formats:
          - trash_ids:
              - c20f169ef63c5f40c2def54abaf4438e # Web Tier 01
              - 403816d65392c79236dcb6dd591aeda4 # Web Tier 02
            strict_negative_scores: false
            tags: [tv]       
      {{ end }}     
    {{ end }}

    {{ if or .Values.radarr.enabled .Values.radarr4k.enabled }}
    radarr:
      {{ if .Values.radarr.enabled }}
      radarr_hd:
        base_url: http://radarr:7878
        api_key: {{ .Values.radarrexposed.apikey }}
        quality_definition:
          type: movie
          preferred_ratio: 0.5
      {{ end }}
      {{ if .Values.radarr4k.enabled }}
      radarr_4k:
        base_url: http://radarr4k:7878
        api_key: {{ .Values.radarr4kexposed.apikey }}
        quality_definition:
          type: movie
          preferred_ratio: 0.5
      {{ end }}
    {{ end }}
{{ end }}